{% extends 'base.html' %}

{% block title %}Hosts - Toy Planner{% endblock %}

{% block content %}
<div class="container">
    <h1 class="page-title">Event Hosts</h1>

    <div class="filter-section">
        <h3>Filter Hosts</h3>
        <form method="GET" class="filter-form">
            <div class="form-group">
                {{ form.language.label(class="form-label") }}
                {{ form.language(class="form-control", placeholder="e.g., Kazakh", value=request.args.get('language', '')) }}
            </div>
            <div class="form-group">
                {{ form.city.label(class="form-label") }}
                {{ form.city(class="form-control", placeholder="e.g., Almaty", value=request.args.get('city', '')) }}
            </div>
            <div class="form-group">
                {{ form.max_price.label(class="form-label") }}
                {{ form.max_price(class="form-control", placeholder="e.g., 150000", value=request.args.get('max_price', '')) }}
            </div>
            <div class="form-group" style="display: flex; gap: 1rem;">
                {{ form.submit(class="btn btn-primary") }}
                <a href="{{ url_for('hosts') }}" class="btn btn-outline">Show All</a>
            </div>
        </form>
    </div>

    {% if hosts and hosts|length > 0 %}
        <div class="venues-grid">
            {% for host in hosts %}
                <div class="venue-card">
                    <div class="venue-image">
                        {% if host.image_url %}
                            <img src="{{ url_for('static', filename=host.image_url) }}" alt="{{ host.name }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 10px;">
                        {% else %}
                            üé§
                        {% endif %}
                    </div>
                    <div class="venue-content">
                        <h3 class="venue-title">{{ host.name }}</h3>
                        {% if host.description %}
                            <p>{{ host.description }}</p>
                        {% endif %}
                        <div class="venue-info">
                            {% if host.experience_years %}<span>üïí {{ host.experience_years }} years exp.</span>{% endif %}
                            {% if host.language %}<span>üó£Ô∏è {{ host.language }}</span>{% endif %}
                            {% if host.city %}<span>üìç {{ host.city }}</span>{% endif %}
                        </div>
                        <div class="venue-price">
                            {% if host.price_per_event %}
                                {{ "{:,}".format(host.price_per_event|int) }} KZT per event
                            {% elif host.price_per_hour %}
                                {{ "{:,}".format(host.price_per_hour|int) }} KZT per hour
                            {% else %}
                                Contact for pricing
                            {% endif %}
                        </div>
                        <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                            <a href="{{ url_for('host_detail', id=host.id) }}" class="btn btn-outline" style="flex: 1;">View Details</a>
                            <a href="{{ url_for('book_host', id=host.id) }}" class="btn btn-primary" style="flex: 1;">Book Now</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center" style="margin: 3rem 0;">
            <p>No hosts found. Please add data to <code>instance/hosts.csv</code>.</p>
        </div>
    {% endif %}
</div>
{% endblock %}


